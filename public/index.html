<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Hub - YouTube Music Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary-color: #FF0000;
            --primary-dark: #CC0000;
            --secondary-color: #282828;
            --background-dark: #0F0F0F;
            --background-medium: #1A1A1A;
            --background-light: #242424;
            --background-card: #2D2D2D;
            --text-primary: #FFFFFF;
            --text-secondary: #AAAAAA;
            --text-disabled: #666666;
            --accent-blue: #3EA6FF;
            --accent-purple: #9146FF;
            --accent-green: #2BA640;
            --bottom-bar-height: 80px;
            --player-height: 90px;
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 32px;
            --spacing-xl: 48px;
            --border-radius: 16px;
            --border-radius-lg: 24px;
            --transition-speed: 0.4s;
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --hover-shadow: 0 12px 48px rgba(255, 0, 0, 0.25);
            --glow-shadow: 0 0 20px rgba(255, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        body {
            background-color: var(--background-dark);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: linear-gradient(135deg, #0F0F0F 0%, #1A1A1A 100%);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, rgba(15, 15, 15, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
            padding: var(--spacing-md) var(--spacing-lg);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            z-index: 100;
            position: relative;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            transition: transform var(--transition-speed);
        }

        .logo:hover {
            transform: scale(1.02);
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-blue));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: var(--glow-shadow);
        }

        .logo-text {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary-color), var(--accent-blue));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.5px;
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .deployment-badge {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.2);
            border-radius: 20px;
            padding: 10px 18px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-color);
            font-weight: 600;
            transition: all var(--transition-speed);
        }

        .deployment-badge:hover {
            background: rgba(255, 0, 0, 0.15);
            transform: translateY(-2px);
            box-shadow: var(--glow-shadow);
        }

        /* Main Content */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-lg);
            padding-bottom: calc(var(--bottom-bar-height) + var(--player-height) + var(--spacing-lg));
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .page {
            display: none;
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-size: 2.5rem;
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .page-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xl);
            line-height: 1.6;
            max-width: 800px;
        }

        /* Home Page */
        .trending-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            flex-wrap: wrap;
            gap: var(--spacing-md);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .trending-title {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .trending-title i {
            color: var(--primary-color);
            font-size: 2rem;
        }

        .trending-controls {
            display: flex;
            gap: var(--spacing-sm);
            background: var(--background-card);
            padding: 8px;
            border-radius: 50px;
        }

        .filter-btn {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-radius: 50px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: var(--background-dark);
            box-shadow: var(--glow-shadow);
        }

        .filter-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        /* Video Grid */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-md);
        }

        .video-card {
            background: var(--background-card);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: all var(--transition-speed);
            cursor: pointer;
            position: relative;
            box-shadow: var(--card-shadow);
            opacity: 0;
            animation: cardEntrance 0.6s ease forwards;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        @keyframes cardEntrance {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .video-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--hover-shadow);
            border-color: rgba(255, 0, 0, 0.2);
        }

        .video-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-blue));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform var(--transition-speed);
        }

        .video-card:hover::before {
            transform: scaleX(1);
        }

        .video-thumbnail-container {
            position: relative;
            overflow: hidden;
            height: 200px;
        }

        .video-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .video-card:hover .video-thumbnail {
            transform: scale(1.08);
        }

        .video-thumbnail-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.9) 100%);
            display: flex;
            align-items: flex-end;
            justify-content: flex-end;
            padding: var(--spacing-md);
            opacity: 0;
            transition: opacity var(--transition-speed);
        }

        .video-card:hover .video-thumbnail-overlay {
            opacity: 1;
        }

        .play-button {
            width: 56px;
            height: 56px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.4rem;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            transition: all var(--transition-speed);
        }

        .play-button:hover {
            transform: scale(1.1);
            background: var(--primary-dark);
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.4);
        }

        .video-info {
            padding: var(--spacing-md);
        }

        .video-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
        }

        .video-channel {
            color: var(--text-secondary);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            margin-bottom: var(--spacing-sm);
        }

        .video-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-disabled);
            font-size: 0.9rem;
        }

        .video-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        .video-action-btn {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-secondary);
            font-size: 1rem;
            cursor: pointer;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .video-action-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        /* Search Page */
        .search-container {
            margin-bottom: var(--spacing-xl);
            position: relative;
        }

        .search-box {
            display: flex;
            gap: var(--spacing-sm);
            max-width: 700px;
            margin: 0 auto;
            background: var(--background-card);
            padding: 8px;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all var(--transition-speed);
        }

        .search-box:focus-within {
            border-color: var(--primary-color);
            box-shadow: var(--glow-shadow);
        }

        .search-input {
            flex: 1;
            padding: 18px 24px;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 1.1rem;
            transition: all var(--transition-speed);
        }

        .search-input:focus {
            outline: none;
        }

        .search-button {
            padding: 0 32px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-blue));
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: var(--glow-shadow);
        }

        .search-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
        }

        .search-results-info {
            margin-top: var(--spacing-md);
            color: var(--text-secondary);
            font-size: 1rem;
            padding: 14px 22px;
            background: var(--background-card);
            border-radius: var(--border-radius);
            display: inline-block;
            border-left: 4px solid var(--primary-color);
        }

        /* Library Page */
        .library-sections {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: var(--spacing-xl);
        }

        .library-section {
            background: var(--background-card);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            transition: all var(--transition-speed);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .library-section:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            color: var(--text-primary);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid rgba(255, 0, 0, 0.2);
        }

        .section-title i {
            color: var(--primary-color);
        }

        .library-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .library-item {
            background: var(--background-light);
            padding: var(--spacing-md);
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            cursor: pointer;
            transition: all var(--transition-speed);
            border-left: 4px solid transparent;
        }

        .library-item:hover {
            background: rgba(255, 0, 0, 0.05);
            border-left-color: var(--primary-color);
            transform: translateX(8px);
        }

        .library-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .library-details {
            flex: 1;
            min-width: 0;
        }

        .library-details h3 {
            font-size: 1.15rem;
            margin-bottom: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .library-details p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Dev Page */
        .dev-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .dev-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-xl);
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.1), rgba(62, 166, 255, 0.1));
            border-radius: var(--border-radius-lg);
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .dev-name {
            font-size: 3.5rem;
            background: linear-gradient(to right, var(--primary-color), var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: var(--spacing-sm);
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1.2;
        }

        .dev-description {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .dev-info-card {
            background: var(--background-card);
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--card-shadow);
            transition: all var(--transition-speed);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .dev-info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .dev-info-card h3 {
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 1.6rem;
        }

        .dev-info-card h3 i {
            color: var(--primary-color);
        }

        .dev-info-card p {
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-md);
            font-size: 1.05rem;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .tech-tag {
            background: rgba(255, 0, 0, 0.1);
            color: var(--primary-color);
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            border: 1px solid rgba(255, 0, 0, 0.2);
            transition: all var(--transition-speed);
        }

        .tech-tag:hover {
            background: rgba(255, 0, 0, 0.2);
            transform: translateY(-3px);
            box-shadow: var(--glow-shadow);
        }

        .disclaimer {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.1) 0%, rgba(62, 166, 255, 0.1) 100%);
            border-left: 4px solid var(--primary-color);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius);
            margin-top: var(--spacing-xl);
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .disclaimer h3 {
            margin-bottom: var(--spacing-md);
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 1.5rem;
        }

        /* Video Player */
        .video-player-container {
            background: linear-gradient(135deg, rgba(15, 15, 15, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
            height: var(--player-height);
            padding: 0 var(--spacing-lg);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: fixed;
            bottom: var(--bottom-bar-height);
            left: 0;
            right: 0;
            z-index: 100;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .now-playing {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            flex: 1;
            max-width: 400px;
        }

        .now-playing-thumbnail {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 0, 0, 0.2);
        }

        .now-playing-info {
            flex: 1;
            min-width: 0;
        }

        .now-playing-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .now-playing-channel {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .control-button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-primary);
            font-size: 1.3rem;
            cursor: pointer;
            transition: all var(--transition-speed);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .control-button:hover {
            color: var(--primary-color);
            background: rgba(255, 0, 0, 0.2);
            transform: scale(1.1);
        }

        .play-pause {
            font-size: 1.6rem;
            background: var(--primary-color);
            color: white;
        }

        .play-pause:hover {
            background: var(--primary-dark);
            color: white;
        }

        /* Bottom Bar */
        .bottom-bar {
            background: linear-gradient(135deg, rgba(15, 15, 15, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
            height: var(--bottom-bar-height);
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: var(--spacing-sm);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-speed);
            flex: 1;
            height: 100%;
            text-decoration: none;
            position: relative;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 4px;
            background: var(--primary-color);
            border-radius: 0 0 4px 4px;
        }

        .nav-item:hover {
            color: var(--text-primary);
            transform: translateY(-5px);
        }

        .nav-icon {
            font-size: 1.6rem;
        }

        .nav-label {
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-xl);
            color: var(--text-secondary);
        }

        .spinner {
            width: 64px;
            height: 64px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
            margin-bottom: var(--spacing-md);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--spacing-xl);
            color: var(--text-secondary);
            background: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: var(--spacing-md);
            color: var(--primary-color);
            opacity: 0.5;
        }

        /* Responsive Design */
        @media (max-width: 1400px) {
            .content, .header-content {
                max-width: 1200px;
            }
        }

        @media (max-width: 1200px) {
            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
            
            .library-sections {
                grid-template-columns: 1fr;
            }
            
            .dev-name {
                font-size: 3rem;
            }
        }

        @media (max-width: 992px) {
            .trending-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .trending-controls {
                width: 100%;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .page-title {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: var(--spacing-sm);
                text-align: center;
            }
            
            .header-info {
                width: 100%;
                justify-content: center;
            }
            
            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .search-box {
                flex-direction: column;
                background: transparent;
                padding: 0;
                gap: var(--spacing-sm);
            }
            
            .search-input {
                background: var(--background-card);
                border-radius: 50px;
                padding: 18px 24px;
            }
            
            .search-button {
                padding: 18px;
                justify-content: center;
            }
            
            .now-playing-info {
                display: none;
            }
            
            .nav-label {
                font-size: 0.8rem;
            }
            
            .nav-icon {
                font-size: 1.4rem;
            }
            
            .video-player-container {
                padding: 0 var(--spacing-sm);
            }
            
            .player-controls {
                gap: var(--spacing-sm);
            }
        }

        @media (max-width: 576px) {
            .video-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .bottom-bar {
                height: 70px;
            }
            
            .video-player-container {
                bottom: 70px;
                height: 80px;
            }
            
            .content {
                padding-bottom: 150px;
                padding: var(--spacing-md);
            }
            
            .nav-item {
                padding: 8px 5px;
            }
            
            .dev-name {
                font-size: 2.5rem;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--background-medium);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, var(--primary-color), var(--accent-blue));
            border-radius: 5px;
            border: 2px solid var(--background-medium);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, var(--primary-dark), var(--accent-blue));
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: var(--spacing-sm); }
        .mt-2 { margin-top: var(--spacing-md); }
        .mt-3 { margin-top: var(--spacing-lg); }
        .mt-4 { margin-top: var(--spacing-xl); }
        
        .mb-1 { margin-bottom: var(--spacing-sm); }
        .mb-2 { margin-bottom: var(--spacing-md); }
        .mb-3 { margin-bottom: var(--spacing-lg); }
        .mb-4 { margin-bottom: var(--spacing-xl); }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { 
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
                transform: scale(1);
            }
            70% { 
                box-shadow: 0 0 0 12px rgba(255, 0, 0, 0);
                transform: scale(1.05);
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
                transform: scale(1);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        .slide-in-right {
            animation: slideInRight 0.4s ease;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon pulse">
                    <i class="fas fa-music"></i>
                </div>
                <div class="logo-text">Music Hub</div>
            </div>
            <div class="header-info">
                <div class="deployment-badge">
                    <i class="fas fa-cloud"></i>
                    <span>Deployed on Vercel</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="content">
        <!-- Home Page -->
        <section id="home-page" class="page active">
            <h1 class="page-title">
                <i class="fas fa-fire"></i>
                <span>Trending Music</span>
            </h1>
            <p class="page-subtitle">Discover the most popular music videos right now. Real-time updates from YouTube Music API.</p>
            
            <div class="trending-header">
                <div class="trending-title">
                    <h2><i class="fas fa-chart-line"></i>Music Charts</h2>
                </div>
                <div class="trending-controls">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-globe"></i> All
                    </button>
                    <button class="filter-btn" data-filter="pop">
                        <i class="fas fa-microphone-alt"></i> Pop
                    </button>
                    <button class="filter-btn" data-filter="hiphop">
                        <i class="fas fa-headphones-alt"></i> Hip-Hop
                    </button>
                    <button class="filter-btn" data-filter="rock">
                        <i class="fas fa-guitar"></i> Rock
                    </button>
                    <button class="filter-btn" data-filter="electronic">
                        <i class="fas fa-compact-disc"></i> Electronic
                    </button>
                </div>
            </div>
            
            <div id="home-loading" class="loading">
                <div class="spinner"></div>
                <p>Loading trending music...</p>
            </div>
            
            <div id="home-container" class="video-grid hidden">
                <!-- Videos will be loaded here -->
            </div>
        </section>

        <!-- Search Page -->
        <section id="search-page" class="page">
            <h1 class="page-title">
                <i class="fas fa-search"></i>
                <span>Search Music</span>
            </h1>
            <p class="page-subtitle">Search for your favorite songs, artists, or albums. Powered by YouTube Music API.</p>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="search-input" class="search-input" placeholder="Search for songs, artists, or albums...">
                    <button id="search-button" class="search-button">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
                <div id="search-results-info" class="search-results-info hidden">
                    Showing results for: <strong id="search-query"></strong>
                </div>
            </div>
            
            <div id="search-loading" class="loading hidden">
                <div class="spinner"></div>
                <p>Searching for music...</p>
            </div>
            
            <div id="search-container" class="video-grid">
                <!-- Search results will be loaded here -->
            </div>
            
            <div id="search-empty" class="empty-state hidden">
                <i class="fas fa-search"></i>
                <h3>No search results yet</h3>
                <p>Use the search box above to discover music on YouTube</p>
            </div>
        </section>

        <!-- Library Page -->
        <section id="library-page" class="page">
            <h1 class="page-title">
                <i class="fas fa-heart"></i>
                <span>Your Library</span>
            </h1>
            <p class="page-subtitle">Manage your favorite music collection. Save songs and create personal playlists.</p>
            
            <div class="library-sections">
                <div class="library-section">
                    <h2 class="section-title">
                        <i class="fas fa-thumbs-up"></i>
                        <span>Liked Songs</span>
                    </h2>
                    <div id="liked-songs" class="library-list">
                        <!-- Liked songs will appear here -->
                        <div class="empty-state">
                            <i class="fas fa-heart"></i>
                            <h3>No liked songs yet</h3>
                            <p>Click the heart icon on videos to add them to your library</p>
                        </div>
                    </div>
                </div>
                
                <div class="library-section">
                    <h2 class="section-title">
                        <i class="fas fa-list"></i>
                        <span>Your Playlists</span>
                    </h2>
                    <div id="playlists" class="library-list">
                        <div class="library-item" id="favorites-playlist">
                            <div class="library-icon" style="background: linear-gradient(135deg, #FF6B6B, #FF8E53);">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="library-details">
                                <h3>Western Favorites</h3>
                                <p>Your collection of favorite songs</p>
                            </div>
                            <i class="fas fa-chevron-right"></i>
                        </div>
                        <div class="library-item" id="recently-played">
                            <div class="library-icon" style="background: linear-gradient(135deg, #4ECDC4, #44A08D);">
                                <i class="fas fa-history"></i>
                            </div>
                            <div class="library-details">
                                <h3>Recently Played</h3>
                                <p>Western songs you recently listened to</p>
                            </div>
                            <i class="fas fa-chevron-right"></i>
                        </div>
                        <div class="library-item" id="top-hits">
                            <div class="library-icon" style="background: linear-gradient(135deg, var(--accent-purple), #6A3093);">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="library-details">
                                <h3>Top Hits</h3>
                                <p>Most popular Western songs</p>
                            </div>
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="disclaimer mt-4">
                <p><strong>Note:</strong> Library is stored locally in your browser using localStorage. Data will be lost if browser cache is cleared.</p>
            </div>
        </section>

        <!-- Dev Page -->
        <section id="dev-page" class="page">
            <div class="dev-container">
                <div class="dev-header">
                    <h1 class="dev-name">AzyDev</h1>
                    <p class="dev-description">Full-Stack Developer specializing in music applications, API integrations, and modern UI/UX. Focus on engaging user experience and robust functionality.</p>
                </div>
                
                <div class="dev-info-card">
                    <h3><i class="fas fa-info-circle"></i> About Music Hub Project</h3>
                    <p>This web application is specifically developed for music enthusiasts with a focus on premium user experience. Using YouTube Data API v3 to display and play the latest and most popular music content.</p>
                    <p>Key features include music recommendation system, real-time search with genre filters, and personal library management with intuitive interface.</p>
                    
                    <div class="tech-stack">
                        <div class="tech-tag">HTML5</div>
                        <div class="tech-tag">CSS3 Modern</div>
                        <div class="tech-tag">JavaScript ES6+</div>
                        <div class="tech-tag">YouTube Data API v3</div>
                        <div class="tech-tag">IFrame Player API</div>
                        <div class="tech-tag">CSS Animations</div>
                        <div class="tech-tag">Responsive Design</div>
                        <div class="tech-tag">LocalStorage API</div>
                        <div class="tech-tag">Vercel Functions</div>
                    </div>
                </div>
                
                <div class="dev-info-card">
                    <h3><i class="fas fa-code"></i> Technical Implementation</h3>
                    <p>This website is built with modular architecture and uses modern web development best practices:</p>
                    <ul style="color: var(--text-secondary); margin-left: 20px; line-height: 1.7; margin-bottom: var(--spacing-md);">
                        <li>YouTube API integration optimized for music content</li>
                        <li>Caching system to reduce API quota usage</li>
                        <li>Video playback with custom controls using IFrame Player API</li>
                        <li>Local storage for user library with basic encryption</li>
                        <li>CSS3 animations for smooth and attractive transitions</li>
                        <li>Responsive design with mobile-first approach</li>
                        <li>Secure API key handling with Vercel Environment Variables</li>
                    </ul>
                </div>
                
                <div class="disclaimer">
                    <h3><i class="fas fa-robot"></i> Disclaimer & Information</h3>
                    <p>This website is developed with the assistance of AI chatbot under human supervision and guidance. Music content is provided by YouTube through public API. This application does not permanently store user data and only uses browser local storage.</p>
                    <p class="mt-3"><strong>YouTube is a trademark of Google LLC.</strong> This application is not affiliated with or endorsed by YouTube, Google, or any artists featured. All music content is copyright of their respective rights holders.</p>
                    <p class="mt-3">This project is educational and demonstrative. For complete music experience, it is recommended to use official music streaming services such as Spotify, Apple Music, or YouTube Music premium.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Video Player -->
    <div id="player-container" class="video-player-container hidden">
        <div class="now-playing">
            <img id="now-playing-thumb" class="now-playing-thumbnail" src="" alt="Now Playing">
            <div class="now-playing-info">
                <div id="now-playing-title" class="now-playing-title">No video playing</div>
                <div id="now-playing-channel" class="now-playing-channel">Select a video to start</div>
            </div>
        </div>
        
        <div class="player-controls">
            <button id="prev-button" class="control-button">
                <i class="fas fa-step-backward"></i>
            </button>
            <button id="play-pause-button" class="control-button play-pause">
                <i class="fas fa-play"></i>
            </button>
            <button id="next-button" class="control-button">
                <i class="fas fa-step-forward"></i>
            </button>
            <button id="like-button" class="control-button">
                <i class="far fa-heart"></i>
            </button>
            <button id="close-player" class="control-button">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-bar">
        <a href="#" class="nav-item active" data-page="home-page">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">Home</span>
        </a>
        <a href="#" class="nav-item" data-page="search-page">
            <i class="fas fa-search nav-icon"></i>
            <span class="nav-label">Search</span>
        </a>
        <a href="#" class="nav-item" data-page="library-page">
            <i class="fas fa-heart nav-icon"></i>
            <span class="nav-label">Library</span>
        </a>
        <a href="#" class="nav-item" data-page="dev-page">
            <i class="fas fa-code nav-icon"></i>
            <span class="nav-label">Dev</span>
        </a>
    </nav>

    <!-- YouTube IFrame Player -->
    <div id="youtube-player" style="display: none;"></div>

    <script>
        // API Configuration
        const IS_VERCEL = true; // Set to true for Vercel deployment
        const API_BASE = window.location.origin; // Auto-detect Vercel URL
        
        // Application State
        let currentPage = 'home-page';
        let player = null;
        let currentVideoId = null;
        let currentVideoInfo = null;
        let likedVideos = JSON.parse(localStorage.getItem('likedVideos')) || [];
        let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];
        let westernArtists = ['Taylor Swift', 'Ed Sheeran', 'The Weeknd', 'Drake', 'Billie Eilish', 
                              'Bruno Mars', 'Adele', 'Justin Bieber', 'Dua Lipa', 'Post Malone',
                              'Harry Styles', 'Miley Cyrus', 'Ariana Grande', 'Kanye West',
                              'Rihanna', 'Coldplay', 'Maroon 5', 'Lady Gaga', 'Shawn Mendes'];
        
        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const navItems = document.querySelectorAll('.nav-item');
        const playerContainer = document.getElementById('player-container');
        const playPauseButton = document.getElementById('play-pause-button');
        const likeButton = document.getElementById('like-button');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const searchContainer = document.getElementById('search-container');
        const homeContainer = document.getElementById('home-container');
        const homeLoading = document.getElementById('home-loading');
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set up event listeners
            setupEventListeners();
            
            // Load liked videos in library
            renderLikedVideos();
            
            // Initialize YouTube IFrame Player
            loadYouTubePlayerAPI();
            
            // Load search history
            if (searchHistory.length > 0) {
                searchInput.value = searchHistory[0];
            }
            
            // Add animation to video cards
            animateCardsOnScroll();
            
            // Load home page content
            loadWesternTrendingVideos();
        });
        
        // Set up all event listeners
        function setupEventListeners() {
            // Bottom navigation
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    switchPage(pageId);
                });
            });
            
            // Player controls
            document.getElementById('play-pause-button').addEventListener('click', togglePlayPause);
            document.getElementById('like-button').addEventListener('click', toggleLikeVideo);
            document.getElementById('close-player').addEventListener('click', closePlayer);
            document.getElementById('prev-button').addEventListener('click', playPreviousVideo);
            document.getElementById('next-button').addEventListener('click', playNextVideo);
            
            // Search functionality
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Filter buttons
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    filterVideos(filter);
                });
            });
            
            // Library items
            document.getElementById('favorites-playlist').addEventListener('click', function() {
                switchPage('library-page');
                document.getElementById('liked-songs').scrollIntoView({ behavior: 'smooth' });
            });
            
            document.getElementById('recently-played').addEventListener('click', function() {
                showNotification('"Recently Played" will show your playback history. Data stored in localStorage.');
            });
            
            document.getElementById('top-hits').addEventListener('click', function() {
                switchPage('home-page');
                showNotification('Showing most popular Western songs');
            });
        }
        
        // Switch between pages
        function switchPage(pageId) {
            // Update active nav item
            navItems.forEach(item => {
                if (item.getAttribute('data-page') === pageId) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Update active page
            pages.forEach(page => {
                if (page.id === pageId) {
                    page.classList.add('active');
                    page.classList.add('animate__animated', 'animate__fadeIn');
                    
                    // Remove animation class after animation completes
                    setTimeout(() => {
                        page.classList.remove('animate__animated', 'animate__fadeIn');
                    }, 600);
                } else {
                    page.classList.remove('active');
                }
            });
            
            currentPage = pageId;
            
            // Load content if needed
            if (pageId === 'home-page' && homeContainer.children.length === 0) {
                loadWesternTrendingVideos();
            }
        }
        
        // Load western trending music videos via Vercel Function
        async function loadWesternTrendingVideos() {
            try {
                showLoading('home');
                
                // Call Vercel Function
                const response = await fetch(`${API_BASE}/api/trending`);
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `API error: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Handle demo data fallback
                if (data.demo) {
                    console.log('Using demo data for trending videos');
                    displayWesternVideos(data.items);
                    showNotification('Using demo data. Add YouTube API key for real results.', 5000);
                } else {
                    displayWesternVideos(data.items);
                }
                
            } catch (error) {
                console.error('Error loading trending videos:', error);
                showDemoWesternVideos();
                showNotification('Failed to load trending videos. Using demo data.', 4000);
            }
        }
        
        // Display western videos
        function displayWesternVideos(videos) {
            homeLoading.classList.add('hidden');
            homeContainer.classList.remove('hidden');
            homeContainer.innerHTML = '';
            
            if (!videos || videos.length === 0) {
                homeContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-music"></i>
                        <h3>No trending videos found</h3>
                        <p>Try again later or check your internet connection</p>
                    </div>
                `;
                return;
            }
            
            videos.forEach((video, index) => {
                // Add delay for staggered animation
                const delay = index * 0.08;
                const videoCard = createWesternVideoCard(video, delay);
                homeContainer.appendChild(videoCard);
            });
        }
        
        // Create a western video card element
        function createWesternVideoCard(videoData, delay = 0) {
            const videoId = videoData.id.videoId || videoData.id;
            const title = videoData.snippet.title;
            const channel = videoData.snippet.channelTitle;
            const thumbnail = videoData.snippet.thumbnails?.medium?.url || 
                            videoData.snippet.thumbnails?.high?.url || 
                            'https://i.ytimg.com/vi/dQw4w9WgXcQ/mqdefault.jpg';
            
            // Random western artist (for demo purposes)
            const randomArtist = westernArtists[Math.floor(Math.random() * westernArtists.length)];
            
            const card = document.createElement('div');
            card.className = 'video-card';
            card.dataset.videoId = videoId;
            card.style.animationDelay = `${delay}s`;
            
            // Add genre for filtering
            const genres = ['pop', 'hiphop', 'rock', 'electronic'];
            const randomGenre = genres[Math.floor(Math.random() * genres.length)];
            card.dataset.genre = randomGenre;
            
            // Truncate title if too long
            const truncatedTitle = title.length > 60 ? title.substring(0, 57) + '...' : title;
            
            card.innerHTML = `
                <div class="video-thumbnail-container">
                    <img src="${thumbnail}" alt="${title}" class="video-thumbnail" loading="lazy">
                    <div class="video-thumbnail-overlay">
                        <div class="play-button">
                            <i class="fas fa-play"></i>
                        </div>
                    </div>
                </div>
                <div class="video-info">
                    <div class="video-title" title="${title}">${truncatedTitle}</div>
                    <div class="video-channel">
                        <i class="fas fa-user"></i>
                        <span>${channel || randomArtist}</span>
                    </div>
                    <div class="video-stats">
                        <span><i class="fas fa-play-circle"></i> ${formatNumber(Math.floor(Math.random() * 1000) + 1)}M views</span>
                        <div class="video-actions">
                            <button class="video-action-btn like-btn" title="Like">
                                <i class="far fa-heart"></i>
                            </button>
                            <button class="video-action-btn add-btn" title="Add to Playlist">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add click event to play video
            card.addEventListener('click', function() {
                playVideo(videoId, title, channel || randomArtist, thumbnail);
            });
            
            // Add like button functionality
            const likeBtn = card.querySelector('.like-btn');
            likeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleLikeVideoFromCard(videoId, title, channel || randomArtist, thumbnail, likeBtn);
            });
            
            // Add to playlist button
            const addBtn = card.querySelector('.add-btn');
            addBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                showNotification(`"${truncatedTitle}" added to playlist`);
            });
            
            // Update like button state if video is already liked
            if (likedVideos.some(video => video.id === videoId)) {
                likeBtn.innerHTML = '<i class="fas fa-heart"></i>';
                likeBtn.style.color = '#FF6B6B';
            }
            
            return card;
        }
        
        // Show demo western videos (fallback)
        function showDemoWesternVideos() {
            homeLoading.classList.add('hidden');
            homeContainer.classList.remove('hidden');
            
            // Demo western music videos data
            const demoVideos = [
                {
                    id: { videoId: 'tFEW5e1uT3Y' },
                    snippet: {
                        title: 'Flowers - Miley Cyrus',
                        channelTitle: 'Miley Cyrus',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/tFEW5e1uT3Y/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/tFEW5e1uT3Y/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: 'k2qgadSvNyU' },
                    snippet: {
                        title: 'As It Was - Harry Styles',
                        channelTitle: 'Harry Styles',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/k2qgadSvNyU/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/k2qgadSvNyU/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: 'b1kbLwvqugk' },
                    snippet: {
                        title: 'Anti-Hero - Taylor Swift',
                        channelTitle: 'Taylor Swift',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/b1kbLwvqugk/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/b1kbLwvqugk/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: 'JGwWNGJdvx8' },
                    snippet: {
                        title: 'Shape of You - Ed Sheeran',
                        channelTitle: 'Ed Sheeran',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/JGwWNGJdvx8/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/JGwWNGJdvx8/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: '5sMKX22BHeE' },
                    snippet: {
                        title: 'Bad Guy - Billie Eilish',
                        channelTitle: 'Billie Eilish',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/5sMKX22BHeE/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/5sMKX22BHeE/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: 'Z9X4k9JdHic' },
                    snippet: {
                        title: 'Blinding Lights - The Weeknd',
                        channelTitle: 'The Weeknd',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/Z9X4k9JdHic/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/Z9X4k9JdHic/hqdefault.jpg' }
                        }
                    }
                }
            ];
            
            demoVideos.forEach((video, index) => {
                const delay = index * 0.1;
                const videoCard = createWesternVideoCard(video, delay);
                homeContainer.appendChild(videoCard);
            });
            
            // Add disclaimer
            const disclaimer = document.createElement('div');
            disclaimer.className = 'disclaimer mt-3';
            disclaimer.innerHTML = `
                <p><strong>Demo Mode:</strong> Using demo data because YouTube API key is not configured. 
                To get real-time Western music trending data, add your YouTube API key in Vercel Environment Variables.</p>
            `;
            homeContainer.appendChild(disclaimer);
        }
        
        // Filter videos by genre
        function filterVideos(filter) {
            const videoCards = document.querySelectorAll('.video-card');
            let visibleCount = 0;
            
            videoCards.forEach(card => {
                if (filter === 'all' || card.dataset.genre === filter) {
                    card.style.display = 'block';
                    visibleCount++;
                    // Add animation
                    card.classList.add('animate__animated', 'animate__fadeIn');
                    setTimeout(() => {
                        card.classList.remove('animate__animated', 'animate__fadeIn');
                    }, 500);
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show message if no videos
            if (visibleCount === 0) {
                const noResults = document.createElement('div');
                noResults.className = 'empty-state';
                noResults.innerHTML = `
                    <i class="fas fa-filter"></i>
                    <h3>No results for "${filter}" filter</h3>
                    <p>Try another filter or reset to "All"</p>
                `;
                
                // Remove existing no results message
                const existingNoResults = homeContainer.querySelector('.empty-state:not(.video-card)');
                if (existingNoResults) {
                    existingNoResults.remove();
                }
                
                homeContainer.appendChild(noResults);
            } else {
                // Remove no results message if it exists
                const noResults = homeContainer.querySelector('.empty-state:not(.video-card)');
                if (noResults) {
                    noResults.remove();
                }
            }
        }
        
        // Toggle like video from card
        function toggleLikeVideoFromCard(videoId, title, channel, thumbnail, button) {
            const index = likedVideos.findIndex(video => video.id === videoId);
            
            if (index === -1) {
                // Add to liked videos
                likedVideos.push({
                    id: videoId,
                    title: title,
                    channel: channel,
                    thumbnail: thumbnail,
                    dateAdded: new Date().toISOString()
                });
                
                // Update button
                button.innerHTML = '<i class="fas fa-heart"></i>';
                button.style.color = '#FF6B6B';
                
                // Show notification
                showNotification(`"${title}" added to favorites`, 3000);
            } else {
                // Remove from liked videos
                likedVideos.splice(index, 1);
                
                // Update button
                button.innerHTML = '<i class="far fa-heart"></i>';
                button.style.color = '';
                
                // Show notification
                showNotification(`"${title}" removed from favorites`, 3000);
            }
            
            // Save to localStorage
            localStorage.setItem('likedVideos', JSON.stringify(likedVideos));
            
            // Update library display
            renderLikedVideos();
            
            // Update player like button if this is the current video
            if (currentVideoId === videoId) {
                updateLikeButtonState();
            }
        }
        
        // Perform search via Vercel Function
        async function performSearch() {
            const query = searchInput.value.trim();
            
            if (!query) {
                showNotification('Please enter search keywords for Western music');
                return;
            }
            
            // Add to search history
            if (!searchHistory.includes(query)) {
                searchHistory.unshift(query);
                if (searchHistory.length > 5) searchHistory.pop();
                localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            }
            
            // Show loading state
            document.getElementById('search-empty').classList.add('hidden');
            document.getElementById('search-loading').classList.remove('hidden');
            searchContainer.innerHTML = '';
            
            // Show search query info
            const resultsInfo = document.getElementById('search-results-info');
            document.getElementById('search-query').textContent = query;
            resultsInfo.classList.remove('hidden');
            
            try {
                const response = await fetch(`${API_BASE}/api/search?q=${encodeURIComponent(query)}`);
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `API error: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Handle demo data fallback
                if (data.demo) {
                    console.log('Using demo data for search results');
                    displaySearchResults(data.items || []);
                    showNotification('Using demo search results. Add YouTube API key for real results.', 5000);
                } else {
                    displaySearchResults(data.items || []);
                }
                
            } catch (error) {
                console.error('Error searching videos:', error);
                showDemoSearchResults(query);
                showNotification('Search failed. Using demo data.', 4000);
            }
        }
        
        // Display search results
        function displaySearchResults(videos) {
            document.getElementById('search-loading').classList.add('hidden');
            
            if (!videos || videos.length === 0) {
                searchContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>No results found</h3>
                        <p>Try different search keywords</p>
                    </div>
                `;
                return;
            }
            
            videos.forEach((video, index) => {
                const delay = index * 0.08;
                const videoCard = createWesternVideoCard(video, delay);
                searchContainer.appendChild(videoCard);
            });
        }
        
        // Show demo search results (fallback)
        function showDemoSearchResults(query) {
            document.getElementById('search-loading').classList.add('hidden');
            
            // Demo search results for western music
            const demoResults = [
                {
                    id: { videoId: 'JGwWNGJdvx8' },
                    snippet: {
                        title: 'Shape of You - Ed Sheeran',
                        channelTitle: 'Ed Sheeran',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/JGwWNGJdvx8/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/JGwWNGJdvx8/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: '5sMKX22BHeE' },
                    snippet: {
                        title: 'Bad Guy - Billie Eilish',
                        channelTitle: 'Billie Eilish',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/5sMKX22BHeE/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/5sMKX22BHeE/hqdefault.jpg' }
                        }
                    }
                },
                {
                    id: { videoId: 'Z9X4k9JdHic' },
                    snippet: {
                        title: 'Blinding Lights - The Weeknd',
                        channelTitle: 'The Weeknd',
                        thumbnails: { 
                            medium: { url: 'https://i.ytimg.com/vi/Z9X4k9JdHic/mqdefault.jpg' },
                            high: { url: 'https://i.ytimg.com/vi/Z9X4k9JdHic/hqdefault.jpg' }
                        }
                    }
                }
            ];
            
            demoResults.forEach((video, index) => {
                const delay = index * 0.1;
                const videoCard = createWesternVideoCard(video, delay);
                searchContainer.appendChild(videoCard);
            });
            
            // Add demo disclaimer
            const disclaimer = document.createElement('div');
            disclaimer.className = 'disclaimer mt-3';
            disclaimer.innerHTML = `
                <p><strong>Demo Mode:</strong> Showing demo results for "${query}" because YouTube API key is not configured. 
                For real-time Western music search, add your YouTube API key in Vercel Environment Variables.</p>
            `;
            searchContainer.appendChild(disclaimer);
        }
        
        // Play a video
        function playVideo(videoId, title, channel, thumbnail) {
            currentVideoId = videoId;
            currentVideoInfo = { title, channel, thumbnail };
            
            // Update player UI
            document.getElementById('now-playing-title').textContent = title;
            document.getElementById('now-playing-channel').textContent = channel;
            document.getElementById('now-playing-thumb').src = thumbnail;
            
            // Update like button state
            updateLikeButtonState();
            
            // Show player with animation
            playerContainer.classList.remove('hidden');
            playerContainer.classList.add('slide-in-right');
            
            // Remove animation class after animation completes
            setTimeout(() => {
                playerContainer.classList.remove('slide-in-right');
            }, 400);
            
            // Load and play video in iframe player
            if (player && typeof player.loadVideoById === 'function') {
                player.loadVideoById(videoId);
                player.playVideo();
                playPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                // If player not ready, prepare it
                if (typeof YT !== 'undefined' && YT.Player) {
                    initializePlayer(videoId);
                }
            }
            
            // Add to recently played in localStorage
            addToRecentlyPlayed(videoId, title, channel, thumbnail);
            
            // Show notification
            showNotification(`Now playing: ${title}`, 3000);
        }
        
        // Initialize YouTube player
        function initializePlayer(videoId) {
            if (player) {
                player.destroy();
            }
            
            player = new YT.Player('youtube-player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'disablekb': 1,
                    'modestbranding': 1,
                    'fs': 0
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        // Load YouTube Player API
        function loadYouTubePlayerAPI() {
            // Load the YouTube IFrame Player API code asynchronously
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }
        
        // YouTube API callback when player is ready
        function onPlayerReady(event) {
            // Player is ready, update UI
            playPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
        }
        
        // YouTube player state change handler
        function onPlayerStateChange(event) {
            // Update play/pause button based on player state
            if (event.data === YT.PlayerState.PLAYING) {
                playPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
            } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                playPauseButton.innerHTML = '<i class="fas fa-play"></i>';
            }
        }
        
        // Toggle play/pause
        function togglePlayPause() {
            if (!player) return;
            
            const playerState = player.getPlayerState();
            
            if (playerState === YT.PlayerState.PLAYING) {
                player.pauseVideo();
                playPauseButton.innerHTML = '<i class="fas fa-play"></i>';
            } else {
                player.playVideo();
                playPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
            }
        }
        
        // Toggle like status from player
        function toggleLikeVideo() {
            if (!currentVideoId || !currentVideoInfo) return;
            
            const index = likedVideos.findIndex(video => video.id === currentVideoId);
            
            if (index === -1) {
                // Add to liked videos
                likedVideos.push({
                    id: currentVideoId,
                    title: currentVideoInfo.title,
                    channel: currentVideoInfo.channel,
                    thumbnail: currentVideoInfo.thumbnail,
                    dateAdded: new Date().toISOString()
                });
                
                // Update button
                likeButton.innerHTML = '<i class="fas fa-heart"></i>';
                likeButton.style.color = '#FF6B6B';
                
                // Show notification
                showNotification(`Added to favorites: ${currentVideoInfo.title}`, 3000);
            } else {
                // Remove from liked videos
                likedVideos.splice(index, 1);
                
                // Update button
                likeButton.innerHTML = '<i class="far fa-heart"></i>';
                likeButton.style.color = '';
                
                // Show notification
                showNotification(`Removed from favorites: ${currentVideoInfo.title}`, 3000);
            }
            
            // Save to localStorage
            localStorage.setItem('likedVideos', JSON.stringify(likedVideos));
            
            // Update library display
            renderLikedVideos();
            
            // Update like buttons on cards
            updateCardLikeButtons();
        }
        
        // Update like button state
        function updateLikeButtonState() {
            if (!currentVideoId) return;
            
            const isLiked = likedVideos.some(video => video.id === currentVideoId);
            
            if (isLiked) {
                likeButton.innerHTML = '<i class="fas fa-heart"></i>';
                likeButton.style.color = '#FF6B6B';
            } else {
                likeButton.innerHTML = '<i class="far fa-heart"></i>';
                likeButton.style.color = '';
            }
        }
        
        // Update like buttons on video cards
        function updateCardLikeButtons() {
            document.querySelectorAll('.video-card').forEach(card => {
                const videoId = card.dataset.videoId;
                const likeBtn = card.querySelector('.like-btn');
                
                if (likeBtn) {
                    const isLiked = likedVideos.some(video => video.id === videoId);
                    
                    if (isLiked) {
                        likeBtn.innerHTML = '<i class="fas fa-heart"></i>';
                        likeBtn.style.color = '#FF6B6B';
                    } else {
                        likeBtn.innerHTML = '<i class="far fa-heart"></i>';
                        likeBtn.style.color = '';
                    }
                }
            });
        }
        
        // Render liked videos in library
        function renderLikedVideos() {
            const likedSongsContainer = document.getElementById('liked-songs');
            
            if (likedVideos.length === 0) {
                likedSongsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-heart"></i>
                        <h3>No liked songs yet</h3>
                        <p>Click the heart icon on videos to add them to your library</p>
                    </div>
                `;
                return;
            }
            
            likedSongsContainer.innerHTML = '';
            
            likedVideos.forEach(video => {
                const item = document.createElement('div');
                item.className = 'library-item';
                item.dataset.videoId = video.id;
                
                const truncatedTitle = video.title.length > 40 ? video.title.substring(0, 37) + '...' : video.title;
                
                item.innerHTML = `
                    <div class="library-icon" style="background: linear-gradient(135deg, #FF6B6B, #FF8E53);">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="library-details">
                        <h3 title="${video.title}">${truncatedTitle}</h3>
                        <p>${video.channel}</p>
                    </div>
                    <button class="video-action-btn play-library-btn" title="Play">
                        <i class="fas fa-play"></i>
                    </button>
                `;
                
                // Add click event to play video
                item.addEventListener('click', function(e) {
                    if (!e.target.closest('button')) {
                        playVideo(video.id, video.title, video.channel, video.thumbnail);
                    }
                });
                
                // Play button
                const playButton = item.querySelector('.play-library-btn');
                playButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    playVideo(video.id, video.title, video.channel, video.thumbnail);
                });
                
                likedSongsContainer.appendChild(item);
            });
        }
        
        // Add video to recently played
        function addToRecentlyPlayed(videoId, title, channel, thumbnail) {
            let recentlyPlayed = JSON.parse(localStorage.getItem('recentlyPlayed')) || [];
            
            // Remove if already exists
            recentlyPlayed = recentlyPlayed.filter(item => item.id !== videoId);
            
            // Add to beginning
            recentlyPlayed.unshift({
                id: videoId,
                title,
                channel,
                thumbnail,
                playedAt: new Date().toISOString()
            });
            
            // Keep only last 10
            if (recentlyPlayed.length > 10) {
                recentlyPlayed.pop();
            }
            
            localStorage.setItem('recentlyPlayed', JSON.stringify(recentlyPlayed));
        }
        
        // Close player
        function closePlayer() {
            playerContainer.classList.add('animate__animated', 'animate__slideOutDown');
            setTimeout(() => {
                playerContainer.classList.remove('animate__animated', 'animate__slideOutDown');
                playerContainer.classList.add('hidden');
            }, 500);
            
            if (player && typeof player.pauseVideo === 'function') {
                player.pauseVideo();
            }
        }
        
        // Play previous video
        function playPreviousVideo() {
            showNotification('"Previous" feature would play the previous video in queue');
        }
        
        // Play next video
        function playNextVideo() {
            showNotification('"Next" feature would play the next video in queue');
        }
        
        // Show loading state
        function showLoading(type) {
            if (type === 'home') {
                homeLoading.classList.remove('hidden');
                homeContainer.classList.add('hidden');
            } else if (type === 'search') {
                document.getElementById('search-loading').classList.remove('hidden');
                document.getElementById('search-empty').classList.add('hidden');
            }
        }
        
        // Show notification
        function showNotification(message, duration = 3000) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 24px;
                right: 24px;
                background: linear-gradient(135deg, var(--primary-color), var(--accent-blue));
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                z-index: 9999;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
                animation: slideInRight 0.4s ease, slideOutRight 0.4s ease ${duration - 400}ms;
                max-width: 400px;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 12px;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            `;
            
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="font-size: 1.3rem;"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after duration
            setTimeout(() => {
                if (notification.parentNode) {
                    document.body.removeChild(notification);
                }
            }, duration);
            
            // Add keyframes for animation if not already added
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // Animate cards on scroll
        function animateCardsOnScroll() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            
            // Observe video cards when added to DOM
            const observeCards = () => {
                document.querySelectorAll('.video-card').forEach(card => {
                    observer.observe(card);
                });
            };
            
            // Initial observation
            setTimeout(observeCards, 100);
            
            // Re-observe when new cards are added
            const originalDisplayWesternVideos = displayWesternVideos;
            displayWesternVideos = function(videos) {
                originalDisplayWesternVideos.call(this, videos);
                setTimeout(observeCards, 100);
            };
            
            const originalDisplaySearchResults = displaySearchResults;
            displaySearchResults = function(videos) {
                originalDisplaySearchResults.call(this, videos);
                setTimeout(observeCards, 100);
            };
        }
        
        // Format numbers (e.g., 1.5M)
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }
        
        // Global callback for YouTube API
        window.onYouTubeIframeAPIReady = function() {
            console.log('YouTube IFrame API is ready');
        };
    </script>
</body>
</html>